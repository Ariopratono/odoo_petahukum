<odoo>
  <template id="website_regulation_detail_inherit" inherit_id="legal_website.regulation_detail_template" name="Regulation Detail: Add Consolidation Download & Preview">
    <xpath expr="//div[@id='regulation_detail']" position="inside">
      <t t-if="record.consolidation_id">
        <div class="mt-4 p-3 border-top">
          <h5>Dokumen Konsolidasi</h5>

          <!-- Tombol unduh -->
          <a t-att-href="record.get_consolidation_download_url()" class="btn btn-primary mt-2" target="_blank">
            <i class="fa fa-download"/> Unduh Dokumen Konsolidasi
          </a>

          <!-- Tombol preview -->
          <a t-att-href="'/regulations/preview/%s' % record.id" class="btn btn-secondary mt-2 ms-2" target="_blank">
            <i class="fa fa-eye"/> Lihat Preview
          </a>
        </div>
      </t>
    </xpath>
  </template>

  <!-- Halaman preview -->
  <template id="regulation_preview_template" name="Regulation Consolidation Preview">
    <t t-call="website.layout">
      <div class="container mt-5">
        <h3><t t-esc="regulation.name"/> â€” Preview Dokumen Konsolidasi</h3>
        <div class="alert alert-info mt-2">
          Ini adalah tampilan pratinjau teks hukum hasil konsolidasi. Untuk versi lengkap, silakan unduh dokumen aslinya.
        </div>
        <div class="border p-3 bg-white" t-raw="html_body"/>
        <div class="mt-4">
          <a t-att-href="'/web/content/peraturan.consolidation/%s/file/%s?download=true' % (regulation.consolidation_id.id, regulation.consolidation_id.file_name)" class="btn btn-primary">
            <i class="fa fa-download"/> Unduh Dokumen Asli
          </a>
          <a href="/regulations" class="btn btn-secondary ms-2">Kembali ke Daftar</a>
        </div>
      </div>
    </t>
  </template>
</odoo>
